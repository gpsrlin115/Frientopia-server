<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>게시글 수정</title>
<!--  <script>-->
<!--    window.onload = function() { //페이지 로드 될때 실행-->
<!--      document.getElementById("btn-update").onclick = function() { // btn-update 버튼의 onclick 이벤트 핸들러를 설정하여 버튼을 클릭하면 PUT 요청을 보내게 함.-->
<!--        var id = document.getElementById("id").value;-->
<!--        var title = document.getElementById("title").value;-->
<!--        var content = document.getElementById("content").value;-->
<!--        // var author = document.getElementById("author").value;-->

<!--        var xhr = new XMLHttpRequest();-->
<!--        xhr.open("PUT", "/api/v1/posts/" + id);-->
<!--        xhr.setRequestHeader("Content-Type", "application/json");-->
<!--        xhr.send(JSON.stringify({ title: title, content: content })); // update메소드에 JSON으로 전송-->

<!--        xhr.onload = function() { //서버에서 응답이 도착하면 onload 이벤트 핸들러 실행-->
<!--          if (xhr.status === 200) { //상태코드 검사-->
<!--            alert("게시글이 수정되었습니다.");-->
<!--            location.href = "/";-->
<!--          } else {-->
<!--            alert("오류가 발생했습니다.");-->
<!--          }-->
<!--        };-->
<!--      };-->
<!--    };-->
<!--  </script>-->
</head>
<body>
<h1>게시글 수정</h1>

<div class="col1-md-12">
  <div class="col-md-4">
    <form>
      <div class="form-group">
        <label for="title">글 번호</label>
        <input type="text" class="form-control" id="id" th:value="${post.id}" readonly>
      </div>
      <div class="form-group">
        <label for="title">제목</label>
        <input type="text" class="form-control" id="title" th:value="${post.title}">
      </div>
      <div class="form-group">
        <label for="author"> 작성자 </label>
        <input type="text" class="form-control" id="author" th:value="${post.author}" readonly>
      </div>
      <div class="form-group">
        <label for="content"> 내용 </label>
        <textarea class="form-control" id="content" th:text="${post.content}"></textarea>
      </div>
    </form>
    <a href="/" role="button" class="btn btn-secondary">취소</a>
    <form th:action = "@{/api/v1/posts/{id}(id = ${post.id})}" method="update">
      <button type="button" th:onclick="'|updatePost(${post.id})|'">수정 완료</button>
      <button type="button" th:onclick="'|deletePost(${post.id})|'">삭제</button>
    </form>

  </div>
</div>

</body>
</html>
